- extends "base.haml"

- block siteInfo
    %title Music~(*-ω-)ﾄﾞｷ

- block body
    :css
        body { margin: 0;overflow: hidden;}
        canvas{ width: 100%; height: 100% }
    %script(src="/js/three.min.js")
    
    .pf
        %input(type="file")
        %p(style="color:white") 0
    %script(src="/js/audioJS.js")
    :javascript
        var api = new audioApi
        j('input').bind('change',function(){
            api.addFiles('input')
        })
        j(function(){
            console.log(1)
            var scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera( 75, j(window).width() / j(window).height(), 0.1, 1000 );
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize( j(window).width(), j(window).height() );
            document.body.appendChild( renderer.domElement );


            

            camera.position.z = 5;

            

            api.onrender = function(a1,a2){


                renderer.render( scene, camera );
            }

            j(window).bind({
                mousemove:function(e){
                    camera.position.x = (e.clientX-j(window).width()/2) / j(window).width() * 10
                    camera.position.y = (-e.clientY+j(window).height()/2) / j(window).height() * 10
                },resize:function(){
                    camera.aspect = j(window).width() / j(window).height();
                    camera.updateProjectionMatrix();
                    renderer.setSize( j(window).width(), j(window).height() );
                }
            })
        })